#include "TH1.h"
#include "TF1.h"
#include "TList.h"


//Skewed Gaussian Function
Double_t SkGausPeak(Double_t *x, Double_t *par) {

//par[0] = scale; par[1] = mean; par[2] = sigma; par[3] = skewness;
  return par[0]*exp(-0.5*pow((x[0]-par[1])/par[2],2))*ROOT::Math::normal_cdf(par[3]*x[0],1,0);

}

void SkGausFuncBack(){

   TFile *f = new TFile("../BothTreeOutAll_XfTestpoint05.root");
   TH1F *h = (TH1F*)f->Get("pi0MxFPhi_0");
   TH1F *hBack = (TH1F*)h->Clone("hBack");
   for(int i=10; i<30; i++){hBack->SetBinContent(i,0); hBack->SetBinError(i,100);}
   hBack->Draw(); 
  
  // TF1 *fsg = new TF1("fsg",SkGausPeak,0.09,0.2,4);//pi0MxFPhi_0 fit function 
   TF1 *fsg = new TF1("fsg",SkGausPeak,0.09,0.2,4);//pi0MxFPhi_1 fit function 
  fsg->SetParameters(400,0.08,0.5,4); //pi0MxFPhi_0 fit initial parameters
  // fsg->SetParameters(2000,0.130,0.01,4); //pi0MxFPhi_1 fit initial parameters
  //  fsg->SetParameters(2000,0.130,0.03,4); //pi0MxFPhi_2 fit initial parameters
  fsg->Draw("same");
  hBack->Fit(fsg,"R");

  TF1 *fsgDraw = new TF1("fsgDraw",SkGausPeak,0.0,1.0,4);
  fsgDraw->SetParameters(fsg->GetParameter(0),fsg->GetParameter(1),fsg->GetParameter(2),fsg->GetParameter(3));
  fsgDraw->SetLineColor(kBlue); fsgDraw->Draw("same");
} 
